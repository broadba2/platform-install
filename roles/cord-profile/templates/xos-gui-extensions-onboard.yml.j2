tosca_definitions_version: tosca_simple_yaml_1_0

description: Onboard xos-sample-gui-extension

imports:
   - custom_types/xos.yaml

topology_template:
  node_templates:

    # UI Extensions
{% for ext in enabled_gui_extensions %}
    gui-extensions-{{ext.name}}:
      type: tosca.nodes.Component
      properties:
        image: {{ deploy_docker_registry }}xosproject/gui-extension-{{ ext.name }}:{{ deploy_docker_tag }}
        command: npm run build

    gui-extensions-store-{{ ext.name }}:
      type: tosca.nodes.ComponentVolumeContainer
      properties:
          container: gui-extensions-store
      requirements:
          - xos:
             node: gui-extensions-{{ext.name}}
             relationship: tosca.relationships.VolumeContainerOfComponent
{% endfor %}

